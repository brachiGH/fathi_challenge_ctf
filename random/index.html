<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebAssembly CTF Challenge</title>
    <style>
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 20px;
        }
        #output {
            font-family: monospace;
            white-space: pre;
            padding: 20px;
            border: 1px solid #ccc;
            margin: 20px;
        }
    </style>
</head>
<body>
    <button onclick="callAssembler()">Run main("hello world")</button>
    <div id="output"></div>

    <!-- Load the JavaScript file generated by Emscripten -->
    <script async src="fathi_challenge.js"></script>

    <script>
      // Setup an error handler for stderr
      err = function(text) {
        window.logMessages.value.push({"level": "err","message": text,"time": getCurrentTime()});
        };
      
       // Setup an error handler for stdout
      out = function(text) {
        window.logMessages.value.push({"level": "log","message": text,"time": getCurrentTime()});
      };

      function callAssembler() {
        _arg = "document.getEl"
        let binarycode = Module.ccall(
          "webmain", // name of C function
          'number', // return type
          ["string"], // argument types
          [_arg], // arguments
        );
        // binarycode = fillmemoryWithBanlk(binarycode);
      }
    
      // Module.onRuntimeInitialized = function() {
      //   callAssembler("nop");
      // };
    </script>
</body>
</html>